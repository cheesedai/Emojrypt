<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emojrypt - The Final & Robust Version</title>

    <link rel="preconnect" href="https://rsms.me">
    <link href="https://rsms.me/inter/inter.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        html { font-family: 'Inter', sans-serif; }
        body { background-color: #f0f2f5; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        .main-gradient { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
        textarea:focus, input:focus { box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.5); border-color: #667eea; transition: all 0.2s; }
        textarea::-webkit-scrollbar { display: none; }
        textarea { -ms-overflow-style: none; scrollbar-width: none; }
        #toast-container { position: fixed; top: 1rem; right: 1rem; z-index: 9999; display: flex; flex-direction: column; gap: 0.75rem; }
        .toast { display: flex; align-items: center; padding: 1rem; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); font-size: 0.875rem; color: #1f2937; transform: translateX(120%); opacity: 0; transition: all 0.3s ease-in-out; }
        .toast.show { transform: translateX(0); opacity: 1; }
        .toast.success { background-color: #d1fae5; border-left: 4px solid #10b981; }
        .toast.error { background-color: #fee2e2; border-left: 4px solid #ef4444; }
        .toast.info { background-color: #dbeafe; border-left: 4px solid #3b82f6; }
        .toast-icon { margin-right: 0.75rem; font-size: 1.25rem; }
    </style>
</head>
<body>
    <div id="toast-container"></div>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script>
    (function() {
        'use strict';
        const toast = { _createToastElement(message, type, icon) { const t=document.getElementById("toast-container"),e=document.createElement("div");e.className=`toast ${type}`,e.innerHTML=`<span class="toast-icon">${icon}</span><span>${message}</span>`,t.appendChild(e),setTimeout(()=>e.classList.add("show"),10),setTimeout(()=>{e.classList.remove("show"),e.addEventListener("transitionend",()=>e.remove())},3e3)},success(t){this._createToastElement(t,"success","âœ…")},error(t){this._createToastElement(t,"error","âŒ")},info(t){this._createToastElement(t,"info","â„¹ï¸")} };
        const React = window.React;
        const ReactDOM = window.ReactDOM;
        const CryptoJS = window.CryptoJS;
        const supabase = window.supabase;
        const { useState, useEffect, createElement: e } = React;
        const supabaseClient = supabase.createClient( 'https://cwqykrfdqmntcxdavunl.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN3cXlrcmZkcW1udGN4ZGF2dW5sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwMzE5NzAsImV4cCI6MjA2NzYwNzk3MH0.cgdIS0v6GsCyXw4gLEPqG5rt3TtdQCgGqB3TPrhKv-4');
        const DEFAULT_KEY = "ðŸ¤«ðŸ”‘ðŸ”“Emojrypt-Professional-Grade-Key-V3";

        // --- THE ROBUST, BIT-LEVEL, BASE1024 EMOJI ENCODING/DECODING ---
        const EMOJI_1024_CHARSET = ['ðŸ˜€','ðŸ˜','ðŸ˜‚','ðŸ¤£','ðŸ˜„','ðŸ˜…','ðŸ˜†','ðŸ˜‰','ðŸ˜Š','ðŸ˜‹','ðŸ˜Ž','ðŸ˜','ðŸ˜˜','ðŸ¥°','ðŸ˜—','ðŸ˜™','ðŸ˜š','ðŸ™‚','ðŸ¤—','ðŸ¤©','ðŸ¤”','ðŸ¤¨','ðŸ˜','ðŸ˜‘','ðŸ˜¶','ðŸ™„','ðŸ˜','ðŸ˜£','ðŸ˜¥','ðŸ˜®','ðŸ¤','ðŸ˜¯','ðŸ˜ª','ðŸ˜«','ðŸ¥±','ðŸ˜´','ðŸ¤¤','ðŸ˜’','ðŸ˜•','ðŸ™ƒ','ðŸ¤‘','ðŸ˜²','ðŸ™','ðŸ˜–','ðŸ˜ž','ðŸ˜Ÿ','ðŸ˜¤','ðŸ˜¢','ðŸ˜­','ðŸ˜¦','ðŸ˜§','ðŸ˜¨','ðŸ˜©','ðŸ¤¯','ðŸ˜¬','ðŸ˜°','ðŸ˜±','ðŸ¥µ','ðŸ¥¶','ðŸ˜³','ðŸ¤ª','ðŸ˜µ','ðŸ˜¡','ðŸ˜ ','ðŸ¤¬','ðŸ˜·','ðŸ¤’','ðŸ¤•','ðŸ¤¢','ðŸ¤®','ðŸ¤§','ðŸ˜‡','ðŸ¤ ','ðŸ¥³','ðŸ¥´','ðŸ¥º','ðŸ¤¥','ðŸ¤«','ðŸ¤­','ðŸ§','ðŸ¤“','ðŸ˜ˆ','ðŸ‘¿','ðŸ¤¡','ðŸ‘¹','ðŸ‘º','ðŸ‘»','ðŸ’€','â˜ ï¸','ðŸ‘½','ðŸ‘¾','ðŸ¤–','ðŸ’©','ðŸ˜º','ðŸ˜¸','ðŸ˜¹','ðŸ˜»','ðŸ˜¼','ðŸ˜½','ðŸ™€','ðŸ˜¿','ðŸ˜¾','ðŸ™ˆ','ðŸ™‰','ðŸ™Š','ðŸ‘‹','ðŸ¤š','ðŸ–','âœ‹','ðŸ––','ðŸ‘Œ','ðŸ¤','âœŒï¸','ðŸ¤ž','ðŸ¤Ÿ','ðŸ¤˜','ðŸ¤™','ðŸ‘ˆ','ðŸ‘‰','ðŸ‘†','ðŸ–•','ðŸ‘‡','ðŸ‘','ðŸ‘Ž','âœŠ','ðŸ‘Š','ðŸ¤›','ðŸ¤œ','ðŸ‘','ðŸ™Œ','ðŸ¤²','ðŸ¤','ðŸ™','âœï¸','ðŸ’…','ðŸ¤³','ðŸ’ª','ðŸ¦¾','ðŸ¦µ','ðŸ¦¿','ðŸ¦¶','ðŸ‘‚','ðŸ¦»','ðŸ‘ƒ','ðŸ§ ','ðŸ¦·','ðŸ¦´','ðŸ‘€','ðŸ‘','ðŸ‘…','ðŸ‘„','ðŸ’‹','ðŸ©¸','ðŸ§¬','ðŸ¦ ','ðŸ§«','ðŸ§ª','ðŸŒ¡','ðŸ”¥','ðŸ’§','ðŸŒŠ','ðŸ’¨','â˜€ï¸','â˜ï¸','â˜”ï¸','â„ï¸','âš¡ï¸','â­ï¸','ðŸŒ','ðŸŽ','ðŸŒ','ðŸ‡','ðŸ“','ðŸ‘','ðŸ','ðŸ¥','ðŸ…','ðŸ†','ðŸ¥•','ðŸŒ½','ðŸŒ¶','ðŸ„','ðŸ¥‘','ðŸ¥’','ðŸ¥¬','ðŸ¥¦','ðŸ§„','ðŸ§…','ðŸ¥”','ðŸ ','ðŸ¥','ðŸž','ðŸ¥–','ðŸ¥¨','ðŸ¥¯','ðŸ¥ž','ðŸ§‡','ðŸ§€','ðŸ–','ðŸ—','ðŸ¥©','ðŸ¥“','ðŸ”','ðŸŸ','ðŸ•','ðŸŒ­','ðŸ¥ª','ðŸ¥™','ðŸ§†','ðŸŒ®','ðŸŒ¯','ðŸ¥—','ðŸ¥˜','ðŸ¥«','ðŸ','ðŸœ','ðŸ²','ðŸ›','ðŸ£','ðŸ±','ðŸ¥Ÿ','ðŸ¦ª','ðŸ¤','ðŸ™','ðŸš','ðŸ˜','ðŸ¥','ðŸ¥ ','ðŸ¥®','ðŸ¢','ðŸ¡','ðŸ§','ðŸ¨','ðŸ¦','ðŸ¥§','ðŸ§','ðŸ°','ðŸŽ‚','ðŸ®','ðŸ­','ðŸ¬','ðŸ«','ðŸ¿','ðŸ©','ðŸª','ðŸŒ°','ðŸ¥œ','ðŸ¯','ðŸ¥›','ðŸ¼','â˜•ï¸','ðŸ«–','ðŸµ','ðŸ¶','ðŸ¾','ðŸ·','ðŸ¸','ðŸ¹','ðŸº','ðŸ»','ðŸ¥‚','ðŸ¥ƒ','ðŸ¥¤','ðŸ§‹','ðŸ§ƒ','ðŸ§‰','ðŸ§Š','ðŸ¥¢','ðŸ½','ðŸ´','ðŸ¥„','ðŸ”ª','ðŸº','âš½ï¸','ðŸ€','ðŸˆ','âš¾ï¸','ðŸ¥Ž','ðŸŽ¾','ðŸ','ðŸ‰','ðŸ¥','ðŸŽ±','ðŸª€','ðŸ“','ðŸ¸','ðŸ’','ðŸ‘','ðŸ¥','ðŸ','ðŸªƒ','ðŸ¥…','â›³ï¸','ðŸª','ðŸ¹','ðŸŽ£','ðŸ¤¿','ðŸ¥Š','ðŸ¥‹','ðŸŽ½','ðŸ›¹','ðŸ›·','â›¸','ðŸ¥Œ','ðŸŽ¿','â›·','ðŸ‚','ðŸª‚','ðŸ‹ï¸','ðŸ¤¼','ðŸ¤¸','â›¹ï¸','ðŸ¤º','ðŸ¤¾','ðŸŒï¸','ðŸ‡','ðŸ§˜','ðŸ§—','ðŸ„','ðŸŠ','ðŸ¤½','ðŸš£',' canoeing','ðŸ†','ðŸ¥‡','ðŸ¥ˆ','ðŸ¥‰','ðŸ…','ðŸŽ–','ðŸµ','ðŸŽ—','ðŸŽ«','ðŸŽŸ','ðŸŽª','ðŸ¤¹','ðŸŽ­','ðŸ©°','ðŸŽ¨','ðŸŽ¬','ðŸŽ¤','ðŸŽ§','ðŸŽ¼','ðŸŽ¹','ðŸ¥','ðŸª˜','ðŸŽ·','ðŸŽº','ðŸª—','ðŸŽ¸','ðŸª•','ðŸŽ»','ðŸŽ²','â™Ÿ','ðŸŽ¯','ðŸŽ³','ðŸŽ®','ðŸŽ°','ðŸ§©','ðŸš—','ðŸš•','ðŸš™','ðŸšŒ','ðŸšŽ','ðŸŽ','ðŸš“','ðŸš‘','ðŸš’','ðŸš','ðŸ›»','ðŸšš','ðŸš›','ðŸšœ','ðŸ›µ','ðŸš²','ðŸ›´','ðŸ›¹','ðŸ›¼','ðŸš','ðŸ›£','ðŸ›¤','ðŸ›¢','â›½ï¸','ðŸš¨','ðŸš¥','ðŸš¦','ðŸ›‘','ðŸš§','âš“ï¸','â›µï¸','ðŸš¤','ðŸ›³','â›´','ðŸ›¥','ðŸš¢','âœˆï¸','ðŸ›©','ðŸ›«','ðŸ›¬','ðŸª‚','ðŸ›°','ðŸš€','ðŸ›¸','ðŸš','ðŸš‚','ðŸšƒ','ðŸš„','ðŸš…','ðŸš†','ðŸš‡','ðŸšˆ','ðŸš‰','ðŸšŠ','ðŸš','ðŸšž','ðŸš‹','ðŸ¢','ðŸ­','ðŸ ','ðŸ¡','ðŸ˜','ðŸš','ðŸ¥','ðŸ¦','ðŸ¨','ðŸª','ðŸ«','ðŸ¬','ðŸ¤','ðŸ¯','ðŸ°','ðŸ’’','ðŸ—¼','ðŸ—½','ðŸ•Œ','ðŸ›•','ðŸ•','â›©','ðŸ•‹','â›²ï¸','â›ºï¸','ðŸŒ','ðŸŒƒ','ðŸ™','ðŸŒ„','ðŸŒ…','ðŸŒ†','ðŸŒ‡','ðŸŒ‰','â™¨ï¸','ðŸŽ ','ðŸŽ¡','ðŸŽ¢','ðŸ’ˆ','ðŸ“','ðŸ—º','ðŸ—¿','ðŸ•','ðŸ–','ðŸœ','ðŸ','ðŸž','ðŸŒ‹','ðŸ—»','ðŸ”','â„ï¸','ðŸŽŠ','ðŸŽ‰','ðŸ§¨','ðŸŽˆ','ðŸŽ','ðŸŽ€','ðŸ§§','ðŸŽ','ðŸŽ','ðŸŽŽ','ðŸ®','ðŸª”','ðŸ•›','ðŸ•','ðŸ•‘','ðŸ•’','ðŸ•“','ðŸ•”','ðŸ••','ðŸ•–','ðŸ•—','ðŸ•˜','ðŸ•™','ðŸ•š','â¤ï¸â€ðŸ”¥','â¤ï¸â€ðŸ©¹','ðŸ’¯','ðŸ’¢','ðŸ’¥','ðŸ’«','ðŸ’¦','ðŸ’¨','ðŸ•³','ðŸ’£','ðŸ’¬','ðŸ—¨','ðŸ—¯','ðŸ’­','ðŸ’¤','äºœ','å”–','å¨ƒ','é˜¿','å“€','æ„›','æŒ¨','å§¶','é€¢','è‘µ','èŒœ','æ‚ª','æ¡','æ¸¥','æ—­','è‘¦','èŠ¦','é¯µ','æ¢“','åœ§','æ–¡','æ‰±','å®›','å§','è™»','é£´','çµ¢','é®Ž','æˆ–','ç²Ÿ','è¢·','å®‰','åºµ','éž','é—‡','éž','æ','ä¼Š','å¨','é•','è‚²','ç£¯','ä¸€','å£±','æº¢','ç¨²','èŒ¨','èŠ‹','é°¯','å°','å’½','å“¡','å› ','å§»','å¼•','é£²','æ·«','èƒ¤','è”­','é™¢','é™°','éš ','éŸ»','å‹','å³',' VÅ©','ç¾½','é›¨','å¯','éµœ','çªº','ä¸‘','ç¢“','è‡¼','æ¸¦','å˜˜','å”„','æ¬','è”š','é°»','å§¥','åŽ©','æµ¦','ç“œ','é–','å™‚','äº‘','é‹','é›²','è','é¤Œ','å¡','å–¶','å¬°','å½±','æ˜ ','æ „','æ°¸','æ³³','æ´©','ç‘›','ç›ˆ','ç©Ž','æ¦Ž','åŽ­','å††','åœ’','å °','å¥„','å®´','å»¶','æ€¨','æŽ©','æ´','æ²¿','æ¼”','ç‚Ž','ç„”','ç‡•','çŒ¿','ç¸','è‰¶','è‹‘','è–—','é ','é‰›','å¡©','æ–¼','æ±š','ç”¥','å‡¹','å¤®','å¥¥','å¾€','å¿œ','æŠ¼','æ—º','æ¨ª','æ¬§','æ®´','ç¿','è¥–','é´¬','é´Ž','é»„','å²¡','æ²–','è»','å„„','å±‹','æ†¶','è‡†','æ¡¶','ç‰¡','ä¹™','ä¿º','å¸','æ©','æ¸©','ç©','éŸ³','ä¸‹','åŒ–','ä»®','ä½•','ä¾¡','ä½³','åŠ ','å¯','å˜‰','å¤','å«','å®¶','å¯¡','ç§‘','æš‡','æžœ','æž¶','æ­Œ','æ²³','ç«','ç‚','ç¦','ç¦¾','ç¨¼','çª©','í™”','èŠ±','è‹›','èŒ„','è·','è¯','è“','è¦','èª²','è²¨','è¿¦','éŽ','éœž','ä»‹','ä¼š','è§£','å›ž','å¡Š','å£Š','å»»','å¿«','æ€ª','æ‚”','æ¢','æ‡','æˆ’','æ‹','æ”¹','é­','æ™¦','æ¢°','æµ·','ç°','ç•Œ',' çš†','çµµ','èŠ¥','èŸ¹','é–‹','éšŽ','è²','å‡±','åŠ¾','å¤–','å’³','å®³','å´–','æ¶¯','è¡—','æ…¨','è“‹','è©²','æ¦‚','éª¸','æµ¬','é¦¨','è›™','åž£','æŸ¿','éˆŽ','åŠƒ','åš‡','å„','å»“','æ‹¡','æ’¹','æ ¼','æ ¸','æ®»','ç²','ç¢º','ç©«','è¦š','è§’','èµ«','è¼ƒ','éƒ­','é–£','éš”','é©','å­¦','å²³','æ¥½','é¡','é¡Ž','æŽ›','ç¬ ','æ¨«','æ©¿','æ¢¶','é°','æ½Ÿ','å‰²','å–','æ°','æ‹¬','æ´»','æ¸‡','æ»‘','è‘›','è¤','è½„','ä¸”','é°¹','ã‹ã¤',' Katsura','éž„','å…œ','ç','è’²','é‡œ','éŽŒ','å™›','é´¨','æ ¢','èŒ…','è±','ç²¥','åˆˆ','è‹…','ç“¦','ä¹¾','ä¾ƒ','å† ','å¯’','åˆŠ','å‹˜','å‹§','å·»','å–š','å ª','å§¦','å®Œ','å®˜','å¯›','å¹²','å¹¹','æ‚£','æ„Ÿ','æ…£','æ†¾','æ›','æ•¢','æ—±','æŸ‘','æ¡“','æ£º','æ¬¾','æ­“','æ±—','æ¼¢','æ¾—','æ½…','ç’°','ç”˜','ç›£','çœ‹','ç«¿','ç®¡','ç°¡','ç·˜','ç·©','ç¼¶','ç½','ç¿°','è‚','è‰¦','èŽž','è¦³','è«Œ','è²«','é‚„','é‘‘','é–“','é–‘','é–¢','é™¥','éŸ“'];
        const INDEX_MAP = new Map(EMOJI_1024_CHARSET.map((emoji, i) => [emoji, i]));

        function toEmoji(uint8Array) {
            let bits = [];
            uint8Array.forEach(byte => {
                for(let i=7; i>=0; i--) bits.push((byte >> i) & 1);
            });

            let emojiString = '';
            for (let i = 0; i < bits.length; i += 10) {
                let chunk = bits.slice(i, i + 10);
                if(chunk.length < 10){
                    while(chunk.length < 10) chunk.push(0);
                }
                const index = parseInt(chunk.join(''), 2);
                emojiString += EMOJI_1024_CHARSET[index];
            }
            return emojiString;
        }

        function fromEmoji(emojiString) {
            let bits = [];
            [...emojiString].forEach(emoji => {
                const index = INDEX_MAP.get(emoji);
                if (index === undefined) throw new Error('Invalid emoji character found in input.');
                bits.push(...index.toString(2).padStart(10, '0').split('').map(Number));
            });
            
            let bytes = [];
            for (let i = 0; i < bits.length; i += 8) {
                let byteChunk = bits.slice(i, i + 8);
                if(byteChunk.length < 8) break; // Discard padding
                bytes.push(parseInt(byteChunk.join(''), 2));
            }
            return new Uint8Array(bytes);
        }

        // --- THE CORRECT, RELIABLE, and COMPACT ENCRYPTION/DECRYPTION ---
        function encryptText(text, key) {
            try {
                const encrypted = CryptoJS.AES.encrypt(text, key);
                const base64 = encrypted.toString();
                // We encode the Base64 string itself, because it contains the IV/salt needed for decryption
                const textEncoder = new TextEncoder();
                const uint8Array = textEncoder.encode(base64);
                return toEmoji(uint8Array);
            } catch (error) {
                console.error("Encryption failed:", error);
                return null;
            }
        }
        
        function decryptText(emojiString, key) {
            try {
                const uint8Array = fromEmoji(emojiString);
                const textDecoder = new TextDecoder();
                const base64 = textDecoder.decode(uint8Array);

                const decrypted = CryptoJS.AES.decrypt(base64, key);
                const resultText = decrypted.toString(CryptoJS.enc.Utf8);
                
                // If result is empty, it means decryption failed (wrong key, etc.)
                if (!resultText) return null;

                return resultText;
            } catch (error) {
                console.error("Decryption failed:", error);
                return null;
            }
        }


        function App() {
            const [mode, setMode] = useState('encrypt');
            const [input, setInput] = useState('');
            const [output, setOutput] = useState('');
            const [customKey, setCustomKey] = useState('');
            const [user, setUser] = useState(null);
            
            const isSubscribed = !!user;

            useEffect(() => {
                supabaseClient.auth.getUser().then(({ data: { user } }) => setUser(user));
                const { data: { subscription } } = supabaseClient.auth.onAuthStateChange((_event, session) => {
                    const currentUser = session?.user ?? null;
                    setUser(currentUser);
                    if (_event === 'SIGNED_IN') toast.success(`Welcome back, ${currentUser.email}!`);
                    if (_event === 'SIGNED_OUT') toast.info("You have been signed out.");
                });
                return () => subscription?.unsubscribe();
            }, []);

            async function signInWithGoogle() {
                await supabaseClient.auth.signInWithOAuth({ provider: 'google' });
            }
            
            async function signOut() {
                await supabaseClient.auth.signOut();
            }

            function handleAction() {
                const keyToUse = isSubscribed && customKey.trim() !== '' ? customKey.trim() : DEFAULT_KEY;
                if (!input && mode === 'encrypt') { toast.info("Please enter a message to encrypt."); return; }
                if (!input && mode === 'decrypt') { setOutput(''); return; }

                let result = null;
                if (mode === 'encrypt') {
                    result = encryptText(input, keyToUse);
                    if (result) toast.success("Encryption complete!"); else toast.error("Encryption failed.");
                } else {
                    result = decryptText(input, keyToUse);
                    if (result !== null) toast.success("Decryption successful!"); else toast.error("Decryption failed. Invalid key or message.");
                }
                setOutput(result);
            }

            const handleCopy = () => { if (output) { navigator.clipboard.writeText(output); toast.success("Copied!"); } };
            const handlePaste = async () => { try { const text = await navigator.clipboard.readText(); setInput(text); toast.info("Pasted!"); } catch (err) { toast.error("Could not read clipboard."); } };
            
            const AuthButton = () => user ?
                e('button', { onClick: signOut, className: 'bg-white/20 text-white text-sm font-semibold py-2 px-4 rounded-lg hover:bg-white/30 backdrop-blur-sm' }, `Logout ${user.email}`) :
                e('button', { onClick: signInWithGoogle, className: 'bg-white text-indigo-600 text-sm font-semibold py-2 px-4 rounded-lg hover:bg-gray-100 shadow' }, 'Login with Google');

            return e('div', { className: 'w-full min-h-screen main-gradient flex flex-col items-center justify-center p-4 selection:bg-indigo-500 selection:text-white' },
                e('div', { className: 'absolute top-4 right-4 z-10' }, e(AuthButton)),
                e('div', { className: 'w-full max-w-2xl mx-auto' },
                    e('div', { className: 'text-center mb-8' },
                        e('h1', { className: 'text-5xl md:text-6xl font-extrabold text-white tracking-tight' }, 'Emojrypt'),
                        e('p', { className: 'text-lg text-white/80 mt-2' }, 'Turn secrets into a fun string of Emojis.')
                    ),
                    e('div', { className: 'card rounded-2xl shadow-2xl p-6 md:p-8 space-y-6' },
                        e('div', { className: 'grid grid-cols-2 gap-2 bg-gray-200 rounded-lg p-1' }, e('button', { onClick: () => { setMode('encrypt'); setInput(''); setOutput(null); }, className: `py-2 px-4 rounded-md text-sm font-semibold transition-all ${mode === 'encrypt' ? 'bg-white shadow' : 'text-gray-600'}` }, 'Encrypt'), e('button', { onClick: () => { setMode('decrypt'); setInput(''); setOutput(null); }, className: `py-2 px-4 rounded-md text-sm font-semibold transition-all ${mode === 'decrypt' ? 'bg-white shadow' : 'text-gray-600'}` }, 'Decrypt')),
                        e('div', { className: 'relative' }, e('textarea', { value: input, onChange: e => setInput(e.target.value), placeholder: mode === 'encrypt' ? 'Type or paste your message...' : 'Paste the Emojrypt code...', className: 'w-full h-32 p-3 rounded-lg border-2 border-gray-200 focus:outline-none resize-none transition-all' }), e('button', { onClick: handlePaste, className: 'absolute bottom-2 right-2 bg-gray-100 hover:bg-gray-200 text-gray-600 text-xs font-semibold py-1 px-2 rounded' }, 'Paste')),
                        e('details', { className: 'group' }, e('summary', { className: 'text-sm font-medium text-gray-600 cursor-pointer list-none flex items-center' }, e('span', null, 'Advanced Options'), e('span', { className: 'ml-1 group-open:rotate-90 transition-transform duration-200' }, 'â–¶ï¸Ž')), e('div', { className: 'mt-3 space-y-2' }, e('input', { type: 'password', value: customKey, onChange: e => setCustomKey(e.target.value), placeholder: isSubscribed ? "Enter your private key (optional)" : "Login to use private keys", disabled: !isSubscribed, className: 'w-full p-2 rounded-lg border-2 border-gray-200 focus:outline-none transition-all disabled:bg-gray-100 disabled:cursor-not-allowed' }), !isSubscribed && e('p', { className: 'text-xs text-indigo-600' }, 'Private Keys are a premium feature. Please log in to use them.'))),
                        e('button', { onClick: handleAction, className: 'w-full text-white font-bold py-3 px-4 rounded-lg transition-all transform hover:scale-[1.02] active:scale-[0.98] main-gradient shadow-lg' }, mode === 'encrypt' ? 'Encrypt Now âœ¨' : 'Decrypt Now ðŸ”‘'),
                        (output !== null && output !== undefined) && e('div', { className: 'relative' }, e('textarea', { readOnly: true, value: output, className: 'w-full h-32 p-3 rounded-lg border-2 border-gray-200 bg-gray-50 resize-none' }), e('button', { onClick: handleCopy, className: 'absolute bottom-2 right-2 bg-indigo-500 hover:bg-indigo-600 text-white text-xs font-semibold py-1 px-2 rounded' }, 'Copy'))
                    )
                )
            );
        }
        ReactDOM.createRoot(document.getElementById('root')).render(e(App));
    })();
    </script>
</body>
</html>
