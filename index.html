<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emojrypt - The Final Version</title>

    <!-- CSS and Fonts -->
    <link rel="preconnect" href="https://rsms.me">
    <link href="https://rsms.me/inter/inter.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        html { font-family: 'Inter', sans-serif; }
        body { background-color: #f0f2f5; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        .main-gradient { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
        textarea:focus, input:focus { box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.5); border-color: #667eea; transition: all 0.2s; }
        textarea::-webkit-scrollbar { display: none; }
        textarea { -ms-overflow-style: none; scrollbar-width: none; }

        /* Custom Toast Notification Styles */
        #toast-container { position: fixed; top: 1rem; right: 1rem; z-index: 9999; display: flex; flex-direction: column; gap: 0.75rem; }
        .toast { display: flex; align-items: center; padding: 1rem; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); font-size: 0.875rem; color: #1f2937; transform: translateX(120%); opacity: 0; transition: all 0.3s ease-in-out; }
        .toast.show { transform: translateX(0); opacity: 1; }
        .toast.success { background-color: #d1fae5; border-left: 4px solid #10b981; }
        .toast.error { background-color: #fee2e2; border-left: 4px solid #ef4444; }
        .toast.info { background-color: #dbeafe; border-left: 4px solid #3b82f6; }
        .toast-icon { margin-right: 0.75rem; font-size: 1.25rem; }
    </style>
</head>
<body>
    <!-- Toast container and the React root element -->
    <div id="toast-container"></div>
    <div id="root"></div>

    <!-- Core JAVASCRIPT LIBRARIES - CDN versions are fine for these stable libs -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- THE COMPLETE APPLICATION SCRIPT WITH SELF-BUILT TOAST SYSTEM -->
    <script>
    (function() {
        'use strict';

        // --- Custom, Dependency-Free Toast Notification System ---
        const toast = {
            _createToastElement(message, type, icon) {
                const toastContainer = document.getElementById('toast-container');
                const toastEl = document.createElement('div');
                toastEl.className = `toast ${type}`;
                toastEl.innerHTML = `<span class="toast-icon">${icon}</span><span>${message}</span>`;
                toastContainer.appendChild(toastEl);
                
                // Animate in
                setTimeout(() => toastEl.classList.add('show'), 10);

                // Auto-remove after 3 seconds
                setTimeout(() => {
                    toastEl.classList.remove('show');
                    // Wait for animation out to complete before removing from DOM
                    toastEl.addEventListener('transitionend', () => toastEl.remove());
                }, 3000);
            },
            success(message) { this._createToastElement(message, 'success', 'âœ…'); },
            error(message) { this._createToastElement(message, 'error', 'âŒ'); },
            info(message) { this._createToastElement(message, 'info', 'â„¹ï¸'); }
        };


        // Now, we start the React app
        const React = window.React;
        const ReactDOM = window.ReactDOM;
        const CryptoJS = window.CryptoJS;
        const supabase = window.supabase;
        
        const { useState, useEffect, createElement: e } = React;
        
        const supabaseClient = supabase.createClient(
            'https://cwqykrfdqmntcxdavunl.supabase.co', 
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN3cXlrcmZkcW1udGN4ZGF2dW5sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIwMzE5NzAsImV4cCI6MjA2NzYwNzk3MH0.cgdIS0v6GsCyXw4gLEPqG5rt3TtdQCgGqB3TPrhKv-4'
        );

        // --- Core Cryptography & Encoding Logic (Unchanged and stable) ---
        const DEFAULT_KEY = "ðŸ¤«ðŸ”‘ðŸ”“EmojryptDefaultKey!2024";
        const EMOJI_CHARSET = ['ðŸ˜‚', 'â¤ï¸', 'ðŸ˜', 'ðŸ˜Š', 'ðŸ˜­', 'ðŸ¤”', 'ðŸ”¥', 'âœ¨', 'ðŸŽ‰', 'ðŸ’¯', 'ðŸ‘', 'ðŸ™', 'ðŸ™„', 'ðŸ˜®', 'ðŸ˜´', 'ðŸ‘‹', 'ðŸ’°', 'âœ…', 'âŒ', 'ðŸš€', 'ðŸŒŸ', 'ðŸ’¡', 'ðŸ’€', 'ðŸ’©', 'ðŸ‘»', 'ðŸ‘½', 'ðŸ¤–', 'ðŸ‘¾', 'ðŸ§‘', 'â€ðŸ’»', 'ðŸ“ˆ', 'ðŸ“‰', 'ðŸ”’', 'ðŸ”“', 'ðŸ”‘', 'ðŸ¤«', 'ðŸŽ‰', 'ðŸŽ‚', 'ðŸŽ', 'ðŸŽˆ', 'ðŸŽŠ', 'ðŸ’', 'ðŸ’Ž', 'ðŸ‘‘', 'ðŸŽ©', 'ðŸ‘ ', 'ðŸ’„', 'ðŸ’…', 'ðŸ§ ', 'ðŸ‘€', 'ðŸ—£ï¸', 'ðŸ‘£', 'ðŸŒ', 'ðŸŒž', 'ðŸŒ™', 'â­', 'ðŸŒˆ', 'ðŸŒŠ', 'ðŸŒ³', 'ðŸŒº', 'ðŸŽ', 'ðŸ“', 'ðŸ•', 'ðŸ”', 'ðŸŸ', 'ðŸ¿', 'ðŸ©', 'ðŸº', 'ðŸ·', 'ðŸ¹', 'ðŸš—', 'âœˆï¸', 'â›µ', 'ðŸš²', 'ðŸ ', 'ðŸ°', 'ðŸ—½', 'ðŸ—¼', 'ðŸ—¿', 'ðŸ“±', 'ðŸ’»', 'âŒš', 'ðŸ“·', 'ðŸ“º', 'ðŸŽ¤', 'ðŸŽ§', 'ðŸŽµ', 'ðŸ•¹ï¸', 'ðŸŽ¨', 'ðŸŽ¯', 'ðŸ€', 'âš½', 'âš¾', 'ðŸŽ±', 'ðŸ¥‡', 'ðŸ¥ˆ', 'ðŸ¥‰', 'ðŸ†', 'ðŸ³ï¸', 'â€ðŸŒˆ', 'ðŸ', 'ðŸ›‘', 'â›”', 'ðŸš«', 'ðŸŒ€', 'ðŸ’¤', 'ðŸ’¢', 'ðŸ’£', 'ðŸ’¥', 'ðŸ’¦', 'ðŸ’¨', 'ðŸ’«', 'ðŸ•³ï¸', 'ðŸµ', 'ðŸ¶', 'ðŸ±', 'ðŸ­', 'ðŸ¹', 'ðŸ°', 'ðŸ¦Š', 'ðŸ»', 'ðŸ¼', 'ðŸ¨', 'ðŸ¯', 'ðŸ¦', 'ðŸ®', 'ðŸ·', 'ðŸ¸', 'ðŸ™', 'ðŸ¦‹', 'ðŸž', 'ðŸŸ', 'ðŸ¢', 'ðŸ', 'ðŸ¦„', 'ðŸ²', 'ðŸŒµ', 'ðŸŽ„', 'ðŸ', 'ðŸ„', 'ðŸŒ', 'ðŸŒŽ', 'ðŸŒ', 'ðŸŒ‹', 'ðŸ—»', 'ðŸ•ï¸', 'ðŸ–ï¸', 'ðŸœï¸', 'ðŸï¸', 'ðŸžï¸', 'ðŸŸï¸', 'ðŸ›ï¸', 'ðŸ—ï¸', 'ðŸ˜ï¸', 'ðŸšï¸', 'ðŸ¢', 'ðŸ¤', 'ðŸ¥', 'ðŸ¦', 'ðŸ¨', 'ðŸ«', 'ðŸª', 'ðŸ­', 'ðŸ¯', 'ðŸ’’', 'â›²', 'â›º', 'ðŸŒ', 'ðŸŒƒ', 'ðŸ™ï¸', 'ðŸŒ„', 'ðŸŒ…', 'ðŸŒ†', 'ðŸŒ‰', 'â™¨ï¸', 'ðŸŽ ', 'ðŸŽ¡', 'ðŸŽ¢', 'ðŸŽª', 'ðŸš‚', 'ðŸšƒ', 'ðŸš„', 'ðŸš…', 'ðŸš†', 'ðŸš‡', 'ðŸšˆ', 'ðŸš‰', 'ðŸšŠ', 'Tram', 'ðŸšŒ', 'ðŸš', 'ðŸš™', 'ðŸš˜', 'ðŸšš', 'ðŸš›', 'ðŸšœ', 'ðŸŽï¸', 'ðŸï¸', 'ðŸ›µ', 'ðŸ›º', 'ðŸš”', 'ðŸš', 'ðŸš‘', 'ðŸš’', 'ðŸš“', 'ðŸš•', 'ðŸš–', 'ðŸš—', 'ðŸšš', 'ðŸš²', 'ðŸ›´', 'ðŸ›¹', 'ðŸ›¼', 'ðŸš', 'ðŸ›£ï¸', 'ðŸ›¤ï¸', 'ðŸ›¢ï¸', 'â›½', 'ðŸš¨', 'ðŸš¥', 'ðŸš¦', 'ðŸš§', 'âš“', 'â›µ', 'ðŸ›¶', 'ðŸš¤', 'ðŸ›³ï¸', 'â›´ï¸', 'ðŸ›¥ï¸', 'ðŸš¢', 'âœˆï¸', 'ðŸ›©ï¸', 'ðŸ›«', 'ðŸ›¬', 'ðŸª‚', 'ðŸ›°ï¸', 'ðŸš€', 'ðŸ›¸', 'ðŸš', 'ðŸšŸ', 'ðŸš ', 'ðŸš¡', 'ðŸª‘', 'ðŸšª', 'ðŸ›—', 'ðŸªž', 'ðŸªŸ', 'ðŸ›ï¸', 'ðŸ›‹ï¸', 'ðŸš½', 'ðŸª ', 'ðŸš¿', 'ðŸ›', 'ðŸ§¼', 'ðŸª¥', 'ðŸª’', 'ðŸ§´', 'ðŸ§·', 'ðŸ§¹', 'ðŸ§º', 'ðŸ§»', 'ðŸ“¦', 'ðŸ“«', 'ðŸ“®', 'ðŸ“¤', 'ðŸ“¥', 'ðŸ“œ', 'ðŸ“ƒ', 'ðŸ“„', 'ðŸ“…', 'ðŸ“†', 'ðŸ—“ï¸', 'ðŸ–‡ï¸', 'ðŸ“Ž', 'ðŸ“', 'ðŸ“', 'ðŸ“Œ', 'ðŸ“', 'âœ‚ï¸', 'ðŸ–Šï¸', 'ðŸ–‹ï¸', 'âœ’ï¸', 'ðŸ–Œï¸', 'ðŸ–ï¸', 'ðŸ“', 'âœï¸', 'ðŸ”', 'ðŸ”Ž', 'ðŸ“¢', 'ðŸ“£', 'ðŸ“¡', 'ðŸ””', 'ðŸ”•', 'âŒ›', 'â³', 'âŒš', 'â°', 'â±ï¸', 'â²ï¸', 'ðŸ•°ï¸', 'ðŸŒ¡ï¸', 'âš–ï¸', 'ðŸ”—', 'â›“ï¸', 'ðŸ§°', 'ðŸ”§', 'ðŸ”¨', 'âš’ï¸', 'â›ï¸', 'ðŸ”©', 'âš™ï¸', 'ðŸ§±', 'ðŸªœ', 'ðŸ›¡ï¸', 'âš”ï¸', 'ðŸ”«', 'ðŸ¹', 'ðŸª„', 'ðŸ”®', 'ðŸ§¿', 'ðŸ§ª', 'ðŸ§«', 'ðŸ§¬', 'ðŸ”¬', 'ðŸ”­', 'âš—ï¸', 'ðŸ©¸', 'ðŸ’Š', 'ðŸ’‰', 'ðŸ©¹', 'ðŸ©º', 'ðŸ·ï¸', 'ðŸ”–', 'ðŸ’´', 'ðŸ’µ', 'ðŸ’¶', 'ðŸ’·', 'ðŸª™', 'ðŸ’³', 'ðŸ§¾', 'âœ‰ï¸', 'ðŸ“§', 'ðŸ“¨', 'ðŸ’Œ', 'ðŸ“®', 'ðŸ—³ï¸', 'ðŸ–‹ï¸', 'ðŸ“', 'ðŸ“‚', 'ðŸ—‚ï¸', 'ðŸ—žï¸', 'ðŸ“°', 'ðŸ“ˆ', 'ðŸ“‰', 'ðŸ“Š', 'ðŸ“‹', 'ðŸ“Œ', 'ðŸ“Ž', 'ðŸ§®', 'ðŸ§', 'ðŸš®', 'â™¿', 'ðŸš­', 'ðŸš°', 'ðŸš»', 'ðŸš®', 'âš ï¸', 'ðŸš¸', 'â›”', 'ðŸš«', 'ðŸš³', 'ðŸš±', 'ðŸš·', 'ðŸ“µ', 'ðŸ”ž', 'â˜¢ï¸', 'â˜£ï¸', 'â¬†ï¸', 'â†—ï¸', 'âž¡ï¸', 'â†˜ï¸', 'â¬‡ï¸', 'â†™ï¸', 'â¬…ï¸', 'â†–ï¸', 'â†•ï¸', 'â†”ï¸', 'â†©ï¸', 'â†ªï¸', 'â¤´ï¸', 'â¤µï¸', 'ðŸ”ƒ', 'ðŸ”„', 'ðŸ”™', 'ðŸ”š', 'ðŸ”›', 'ðŸ”œ', 'ðŸ”', 'ðŸ›', 'âš›ï¸', 'ðŸ•‰ï¸', 'âœ¡ï¸', 'â˜¸ï¸', 'â˜¯ï¸', 'âœï¸', 'â˜¦ï¸', 'â˜ªï¸', 'â˜®ï¸', 'ðŸ•Ž', 'ðŸ”¯', 'â™ˆ', 'â™‰', 'â™Š', 'â™‹', 'â™Œ', 'â™', 'â™Ž', 'â™', 'â™', 'â™‘', 'â™’', 'â™“', 'â›Ž', 'ðŸ”€', 'ðŸ”', 'ðŸ”‚', 'â–¶ï¸', 'â©', 'â­ï¸', 'â¯ï¸', 'â—€ï¸', 'âª', 'â®ï¸', 'ðŸ”¼', 'â«', 'ðŸ”½', 'â¬', 'â¸ï¸', 'â¹ï¸', 'âºï¸', 'âï¸', 'ðŸŽ¦', 'ðŸ”…', 'ðŸ”†', 'ðŸ“¶', 'ðŸ“³', 'ðŸ“´', 'âš•ï¸', 'â™¾ï¸', 'â™»ï¸', 'âšœï¸', 'ðŸ”±', 'ðŸ“›', 'ðŸ”°', 'â­•', 'âœ…', 'â˜‘ï¸', 'âœ”ï¸', 'âœ–ï¸', 'âŒ', 'âŽ', 'âž•', 'âž–', 'âž—', 'âœ–ï¸', 'â—', 'â“', 'â•', 'â”', 'Â©ï¸', 'Â®ï¸', 'â„¢ï¸', '#ï¸âƒ£', '*ï¸âƒ£', '0ï¸âƒ£', '1ï¸âƒ£', '2ï¸âƒ£', '3ï¸âƒ£', '4ï¸âƒ£', '5ï¸âƒ£', '6ï¸âƒ£', '7ï¸âƒ£', '8ï¸âƒ£', '9ï¸âƒ£', 'ðŸ”Ÿ', 'ðŸ” ', 'ðŸ”¡', 'ðŸ”¢', 'ðŸ”£', 'ðŸ”¤', 'ðŸ…°ï¸', 'ðŸ†Ž', 'ðŸ…±ï¸', 'ðŸ†‘', 'ðŸ†’', 'ðŸ†“', 'â„¹ï¸', 'ðŸ†”', 'â“‚ï¸', 'ðŸ†•', 'ðŸ†–', 'ðŸ…¾ï¸', 'ðŸ†—', 'ðŸ…¿ï¸', 'ðŸ†˜', 'ðŸ†™', 'ðŸ†š', 'ðŸˆ', 'ðŸˆ‚ï¸', 'ðŸˆ·ï¸', 'ðŸˆ¶', 'ðŸˆ¯', 'ðŸ‰', 'ðŸˆ¹', 'ðŸˆš', 'ðŸˆ²', 'ðŸ‰‘', 'ðŸˆ¸', 'ðŸˆ´', 'ðŸˆ³', 'ãŠ—ï¸', 'ãŠ™ï¸', 'ðŸˆº', 'ðŸˆµ', 'ðŸ”´', 'ðŸŸ ', 'ðŸŸ¡', 'ðŸŸ¢', 'ðŸ”µ', 'ðŸŸ£', 'ðŸŸ¤', 'âš«', 'âšª', 'ðŸŸ¥', 'ðŸŸ§', 'ðŸŸ¨', 'ðŸŸ©', 'ðŸŸ¦', 'ðŸŸª', 'ðŸŸ«', 'â¬›', 'â¬œ', 'ðŸ”¶', 'ðŸ”·', 'ðŸ”¸', 'ðŸ”¹', 'ðŸ”º', 'ðŸ”»', 'ðŸ”³', 'ðŸ”²', 'â–ªï¸', 'â–«ï¸', 'â—¾', 'â—½', 'â—¼ï¸', 'â—»ï¸', 'ðŸ’­', 'ðŸ—¯ï¸', 'ðŸ’¬', 'ðŸ—¨ï¸', 'ðŸ‘ï¸â€ðŸ—¨ï¸'];
        const BASE = EMOJI_CHARSET.length;
        const EMOJI_MAP = new Map(EMOJI_CHARSET.map((emoji, i) => [i, emoji]));
        const REVERSE_EMOJI_MAP = new Map(EMOJI_CHARSET.map((emoji, i) => [emoji, i]));
        
        function encryptText(text, key) { try { const encrypted = CryptoJS.AES.encrypt(text, key); const bytes = []; for (let i = 0; i < encrypted.ciphertext.words.length; i++) { const word = encrypted.ciphertext.words[i]; bytes.push((word >> 24) & 0xff, (word >> 16) & 0xff, (word >> 8) & 0xff, word & 0xff); } const actualBytes = bytes.slice(0, encrypted.ciphertext.sigBytes); return bytesToBaseEmoji(actualBytes); } catch (e) { console.error("Encryption failed:", e); return null; } }
        function decryptText(emojiString, key) { try { if (!emojiString) return ""; const bytes = baseEmojiToBytes(emojiString); if(!bytes) return null; const words = []; for (let i = 0; i < bytes.length; i += 4) { words.push((bytes[i] << 24) | (bytes[i + 1] << 16) | (bytes[i + 2] << 8) | bytes[i + 3]); } const cipherParams = CryptoJS.lib.CipherParams.create({ ciphertext: CryptoJS.lib.WordArray.create(words, bytes.length) }); const decrypted = CryptoJS.AES.decrypt(cipherParams, key); const result = decrypted.toString(CryptoJS.enc.Utf8); return result.length > 0 ? result : (emojiString.length > 0 ? null : ""); } catch (e) { console.error("Decryption failed:", e); return null; } }
        function bytesToBaseEmoji(bytes) { if (bytes.length === 0) return ''; let num = BigInt(0); for (let i = 0; i < bytes.length; i++) { num = (num << BigInt(8)) + BigInt(bytes[i]); } if (num === BigInt(0)) return EMOJI_MAP.get(0); let result = ''; while (num > 0) { result = EMOJI_MAP.get(Number(num % BigInt(BASE))) + result; num = num / BigInt(BASE); } return result; }
        function baseEmojiToBytes(emojiStr) { try { let num = BigInt(0); for (const emoji of [...emojiStr]) { const val = REVERSE_EMOJI_MAP.get(emoji); if (val === undefined) { console.error(`Invalid emoji in input: ${emoji}`); throw new Error('Invalid emoji'); } num = (num * BigInt(BASE)) + BigInt(val); } let hex = num.toString(16); if (hex.length % 2) hex = '0' + hex; const bytes = []; for (let i = 0; i < hex.length; i += 2) { bytes.push(parseInt(hex.substr(i, 2), 16)); } return bytes; } catch(e) { return null; }}

        // --- React App Component ---
        function App() {
            const [mode, setMode] = useState('encrypt');
            const [input, setInput] = useState('');
            const [output, setOutput] = useState('');
            const [customKey, setCustomKey] = useState('');
            const [user, setUser] = useState(null);
            
            const isSubscribed = !!user;

            useEffect(() => {
                supabaseClient.auth.getUser().then(({ data: { user } }) => setUser(user));
                const { data: { subscription } } = supabaseClient.auth.onAuthStateChange((_event, session) => {
                    const currentUser = session?.user ?? null;
                    setUser(currentUser);
                    if (_event === 'SIGNED_IN') toast.success(`Welcome back, ${currentUser.email}!`);
                    if (_event === 'SIGNED_OUT') toast.info("You have been signed out.");
                });
                return () => subscription?.unsubscribe();
            }, []);

            async function signInWithGoogle() {
                const { error } = await supabaseClient.auth.signInWithOAuth({ provider: 'google', options: { redirectTo: window.location.href } });
                if (error) toast.error(error.message);
            }
            
            async function signOut() {
                const { error } = await supabaseClient.auth.signOut();
                if (error) toast.error(error.message);
            }

            function handleAction() {
                const keyToUse = isSubscribed && customKey.trim() !== '' ? customKey.trim() : DEFAULT_KEY;
                if (!input) return;
                
                let result = null;
                if (mode === 'encrypt') {
                    result = encryptText(input, keyToUse);
                    if (result !== null) toast.success("Encryption complete!");
                    else toast.error("Encryption failed.");
                } else {
                    result = decryptText(input, keyToUse);
                    if (result !== null) toast.success("Decryption successful!");
                    else toast.error("Decryption failed. Invalid key or message.");
                }
                setOutput(result);
            }

            const handleCopy = () => { if (output) { navigator.clipboard.writeText(output); toast.success("Copied!"); } };
            const handlePaste = async () => { try { const text = await navigator.clipboard.readText(); setInput(text); toast.info("Pasted!"); } catch (err) { toast.error("Could not read clipboard."); } };
            
            const AuthButton = () => user ?
                e('button', { onClick: signOut, className: 'bg-white/20 text-white text-sm font-semibold py-2 px-4 rounded-lg hover:bg-white/30 backdrop-blur-sm' }, `Logout ${user.email}`) :
                e('button', { onClick: signInWithGoogle, className: 'bg-white text-indigo-600 text-sm font-semibold py-2 px-4 rounded-lg hover:bg-gray-100 shadow' }, 'Login with Google');

            return e('div', { className: 'w-full min-h-screen main-gradient flex flex-col items-center justify-center p-4 selection:bg-indigo-500 selection:text-white' },
                e('div', { className: 'absolute top-4 right-4 z-10' }, e(AuthButton)),
                e('div', { className: 'w-full max-w-2xl mx-auto' },
                    e('div', { className: 'text-center mb-8' },
                        e('h1', { className: 'text-5xl md:text-6xl font-extrabold text-white tracking-tight' }, 'Emojrypt'),
                        e('p', { className: 'text-lg text-white/80 mt-2' }, 'Turn your secrets into a fun string of Emojis.')
                    ),
                    e('div', { className: 'card rounded-2xl shadow-2xl p-6 md:p-8 space-y-6' },
                        e('div', { className: 'grid grid-cols-2 gap-2 bg-gray-200 rounded-lg p-1' }, e('button', { onClick: () => { setMode('encrypt'); setInput(''); setOutput(''); }, className: `py-2 px-4 rounded-md text-sm font-semibold transition-all ${mode === 'encrypt' ? 'bg-white shadow' : 'text-gray-600'}` }, 'Encrypt'), e('button', { onClick: () => { setMode('decrypt'); setInput(''); setOutput(''); }, className: `py-2 px-4 rounded-md text-sm font-semibold transition-all ${mode === 'decrypt' ? 'bg-white shadow' : 'text-gray-600'}` }, 'Decrypt')),
                        e('div', { className: 'relative' }, e('textarea', { value: input, onChange: e => setInput(e.target.value), placeholder: mode === 'encrypt' ? 'Type or paste your message...' : 'Paste the Emojrypt code...', className: 'w-full h-32 p-3 rounded-lg border-2 border-gray-200 focus:outline-none resize-none transition-all' }), e('button', { onClick: handlePaste, className: 'absolute bottom-2 right-2 bg-gray-100 hover:bg-gray-200 text-gray-600 text-xs font-semibold py-1 px-2 rounded' }, 'Paste')),
                        e('details', { className: 'group' }, e('summary', { className: 'text-sm font-medium text-gray-600 cursor-pointer list-none flex items-center' }, e('span', null, 'Advanced Options'), e('span', { className: 'ml-1 group-open:rotate-90 transition-transform duration-200' }, 'â–¶ï¸Ž')), e('div', { className: 'mt-3 space-y-2' }, e('input', { type: 'password', value: customKey, onChange: e => setCustomKey(e.target.value), placeholder: isSubscribed ? "Enter your private key (optional)" : "Login to use private keys", disabled: !isSubscribed, className: 'w-full p-2 rounded-lg border-2 border-gray-200 focus:outline-none transition-all disabled:bg-gray-100 disabled:cursor-not-allowed' }), !isSubscribed && e('p', { className: 'text-xs text-indigo-600' }, 'Private Keys are a premium feature. Please log in to use them.'))),
                        e('button', { onClick: handleAction, className: 'w-full text-white font-bold py-3 px-4 rounded-lg transition-all transform hover:scale-[1.02] active:scale-[0.98] main-gradient shadow-lg' }, mode === 'encrypt' ? 'Encrypt Now âœ¨' : 'Decrypt Now ðŸ”‘'),
                        output && e('div', { className: 'relative' }, e('textarea', { readOnly: true, value: output, className: 'w-full h-32 p-3 rounded-lg border-2 border-gray-200 bg-gray-50 resize-none' }), e('button', { onClick: handleCopy, className: 'absolute bottom-2 right-2 bg-indigo-500 hover:bg-indigo-600 text-white text-xs font-semibold py-1 px-2 rounded' }, 'Copy'))
                    )
                )
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(e(App));

    })();
    </script>
</body>
</html>
